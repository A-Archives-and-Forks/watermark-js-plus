import{ak as g,as as p,aZ as v,ao as u}from"./framework.08b1f529.js";function b(e){for(var t=-1,a=e==null?0:e.length,s={};++t<a;){var l=e[t];s[l[0]]=l[1]}return s}function S(e){return e==null}class F extends Error{constructor(t){super(t),this.name="ElementPlusError"}}function O(e,t){throw new F(`[${e}] ${t}`)}function N(e,t){}const h="__epPropKey",o=e=>e,$=e=>g(e)&&!!e[h],j=(e,t)=>{if(!g(e)||$(e))return e;const{values:a,required:s,default:l,type:n,validator:r}=e,c={type:n,required:!!s,validator:a||r?f=>{let d=!1,i=[];if(a&&(i=Array.from(a),p(e,"default")&&i.push(l),d||(d=i.includes(f))),r&&(d||(d=r(f))),!d&&i.length>0){const w=[...new Set(i)].map(P=>JSON.stringify(P)).join(", ");v(`Invalid prop: validation failed${t?` for prop "${t}"`:""}. Expected one of [${w}], got value ${JSON.stringify(f)}.`)}return d}:void 0,[h]:!0};return p(e,"default")&&(c.default=l),c},E=e=>b(Object.entries(e).map(([t,a])=>[t,j(a,t)])),y=e=>e,x="ElUpload";class L extends Error{constructor(t,a,s,l){super(t),this.name="UploadAjaxError",this.status=a,this.method=s,this.url=l}}function m(e,t,a){let s;return a.response?s=`${a.response.error||a.response}`:a.responseText?s=`${a.responseText}`:s=`fail to ${t.method} ${e} ${a.status}`,new L(s,a.status,t.method,e)}function q(e){const t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch{return t}}const B=e=>{typeof XMLHttpRequest>"u"&&O(x,"XMLHttpRequest is undefined");const t=new XMLHttpRequest,a=e.action;t.upload&&t.upload.addEventListener("progress",n=>{const r=n;r.percent=n.total>0?n.loaded/n.total*100:0,e.onProgress(r)});const s=new FormData;if(e.data)for(const[n,r]of Object.entries(e.data))Array.isArray(r)?s.append(n,...r):s.append(n,r);s.append(e.filename,e.file,e.file.name),t.addEventListener("error",()=>{e.onError(m(a,e,t))}),t.addEventListener("load",()=>{if(t.status<200||t.status>=300)return e.onError(m(a,e,t));e.onSuccess(q(t))}),t.open(e.method,a,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);const l=e.headers||{};if(l instanceof Headers)l.forEach((n,r)=>t.setRequestHeader(r,n));else for(const[n,r]of Object.entries(l))S(r)||t.setRequestHeader(n,String(r));return t.send(s),t},R=["text","picture","picture-card"];let T=1;const U=()=>Date.now()+T++,A=E({action:{type:String,default:"#"},headers:{type:o(Object)},method:{type:String,default:"post"},data:{type:Object,default:()=>y({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},type:{type:String,default:"select"},fileList:{type:o(Array),default:()=>y([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:R,default:"text"},httpRequest:{type:o(Function),default:B},disabled:Boolean,limit:Number}),_=E({...A,beforeUpload:{type:o(Function),default:u},beforeRemove:{type:o(Function)},onRemove:{type:o(Function),default:u},onChange:{type:o(Function),default:u},onPreview:{type:o(Function),default:u},onSuccess:{type:o(Function),default:u},onProgress:{type:o(Function),default:u},onError:{type:o(Function),default:u},onExceed:{type:o(Function),default:u}});export{E as a,j as b,N as c,o as d,A as e,b as f,U as g,_ as h,S as i,y as m,O as t,R as u};
