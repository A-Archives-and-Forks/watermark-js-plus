import{W as i,c as m,i as u}from"./global.3f5b834c.js";import{W as d}from"./watermark.2d0b2ad6.js";class v extends d{constructor(o={}){o.globalAlpha=.005,o.mode="blind",super(o)}static decode(o){const e=Object.assign({url:"",fillColor:"#000",compositeOperation:"color-burn",mode:"canvas"},o);if(e.url&&e.mode==="canvas"){const a=new Image;a.src=e.url,a.onload=()=>{var n;const{width:r,height:s}=a,c=i.createCanvas(r,s),t=c.getContext("2d");if(t===null)throw new Error("get context error");t.drawImage(a,0,0,r,s),t.globalCompositeOperation=e.compositeOperation,t.fillStyle=e.fillColor,t.fillRect(0,0,r,s);const l=m(c);e.onSuccess&&u(e.onSuccess)&&((n=e.onSuccess)==null||n.call(e,l))}}}}export{v as B};
