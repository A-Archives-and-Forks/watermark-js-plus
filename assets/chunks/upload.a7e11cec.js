import{aj as g,ar as p,aZ as v,an as u}from"./framework.ae2e57e3.js";var N=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function P(e){for(var t=-1,a=e==null?0:e.length,s={};++t<a;){var l=e[t];s[l[0]]=l[1]}return s}function S(e){return e==null}class j extends Error{constructor(t){super(t),this.name="ElementPlusError"}}function F(e,t){throw new j(`[${e}] ${t}`)}function U(e,t){}const h="__epPropKey",o=e=>e,O=e=>g(e)&&!!e[h],$=(e,t)=>{if(!g(e)||O(e))return e;const{values:a,required:s,default:l,type:r,validator:n}=e,c={type:r,required:!!s,validator:a||n?f=>{let d=!1,i=[];if(a&&(i=Array.from(a),p(e,"default")&&i.push(l),d||(d=i.includes(f))),n&&(d||(d=n(f))),!d&&i.length>0){const E=[...new Set(i)].map(b=>JSON.stringify(b)).join(", ");v(`Invalid prop: validation failed${t?` for prop "${t}"`:""}. Expected one of [${E}], got value ${JSON.stringify(f)}.`)}return d}:void 0,[h]:!0};return p(e,"default")&&(c.default=l),c},w=e=>P(Object.entries(e).map(([t,a])=>[t,$(a,t)])),y=e=>e,x="ElUpload";class L extends Error{constructor(t,a,s,l){super(t),this.name="UploadAjaxError",this.status=a,this.method=s,this.url=l}}function m(e,t,a){let s;return a.response?s=`${a.response.error||a.response}`:a.responseText?s=`${a.responseText}`:s=`fail to ${t.method} ${e} ${a.status}`,new L(s,a.status,t.method,e)}function T(e){const t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch{return t}}const q=e=>{typeof XMLHttpRequest>"u"&&F(x,"XMLHttpRequest is undefined");const t=new XMLHttpRequest,a=e.action;t.upload&&t.upload.addEventListener("progress",r=>{const n=r;n.percent=r.total>0?r.loaded/r.total*100:0,e.onProgress(n)});const s=new FormData;if(e.data)for(const[r,n]of Object.entries(e.data))Array.isArray(n)?s.append(r,...n):s.append(r,n);s.append(e.filename,e.file,e.file.name),t.addEventListener("error",()=>{e.onError(m(a,e,t))}),t.addEventListener("load",()=>{if(t.status<200||t.status>=300)return e.onError(m(a,e,t));e.onSuccess(T(t))}),t.open(e.method,a,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);const l=e.headers||{};if(l instanceof Headers)l.forEach((r,n)=>t.setRequestHeader(n,r));else for(const[r,n]of Object.entries(l))S(n)||t.setRequestHeader(r,String(n));return t.send(s),t},B=["text","picture","picture-card"];let R=1;const _=()=>Date.now()+R++,A=w({action:{type:String,default:"#"},headers:{type:o(Object)},method:{type:String,default:"post"},data:{type:Object,default:()=>y({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},type:{type:String,default:"select"},fileList:{type:o(Array),default:()=>y([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:B,default:"text"},httpRequest:{type:o(Function),default:q},disabled:Boolean,limit:Number}),D=w({...A,beforeUpload:{type:o(Function),default:u},beforeRemove:{type:o(Function)},onRemove:{type:o(Function),default:u},onChange:{type:o(Function),default:u},onPreview:{type:o(Function),default:u},onSuccess:{type:o(Function),default:u},onProgress:{type:o(Function),default:u},onError:{type:o(Function),default:u},onExceed:{type:o(Function),default:u}});export{w as a,$ as b,N as c,o as d,U as e,P as f,_ as g,A as h,S as i,D as j,y as m,F as t,B as u};
